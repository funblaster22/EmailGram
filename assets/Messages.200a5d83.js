import{S as T,i as E,s as M,e as m,b as G,c,d as g,f as l,j as x,k as _,y as I,a as $,F as y,z as k,G as j,q as C,t as P,A as S}from"./vendor.a0249c8d.js";import{s as O}from"./svelte.12aa2442.js";import{r as H,u as R,b as X}from"./gapi.98da7faa.js";function J(i){let e,t,s;return{c(){e=m("div"),t=m("img"),G(t.src,s=i[0])||c(t,"src",s),c(t,"alt","user"),c(e,"class","aspect-square rounded-full bg-gray-200 m-1")},m(a,r){g(a,e,r),l(e,t)},p(a,[r]){r&1&&!G(t.src,s=a[0])&&c(t,"src",s)},i:x,o:x,d(a){a&&_(e)}}}function K(i,e,t){let{src:s=O}=e;return i.$$set=a=>{"src"in a&&t(0,s=a.src)},[s]}class L extends T{constructor(e){super();E(this,e,K,J,M,{src:0})}}function Q(i){let e,t,s,a,r,u,n=i[0].participants.join(", ")+"",f,A,v,h=H(i[0].date)+"",z,B,F,w,b=i[0].snippet+"",q,D,p;return a=new L({}),{c(){e=m("a"),t=m("div"),s=m("div"),I(a.$$.fragment),r=$(),u=m("div"),f=y(n),A=$(),v=m("div"),z=y(h),B=y(" >"),F=$(),w=m("div"),q=y(b),c(s,"class","img svelte-1hn8m2z"),c(u,"class","addr whitespace-nowrap overflow-ellipsis overflow-x-hidden mr-1 svelte-1hn8m2z"),c(v,"class","time svelte-1hn8m2z"),c(w,"class","snippet border-b border-gray-300 overflow-hidden svelte-1hn8m2z"),c(t,"class","container svelte-1hn8m2z"),c(e,"href",D="#/messages/"+i[0].id)},m(o,d){g(o,e,d),l(e,t),l(t,s),k(a,s,null),l(t,r),l(t,u),l(u,f),l(t,A),l(t,v),l(v,z),l(v,B),l(t,F),l(t,w),l(w,q),p=!0},p(o,[d]){(!p||d&1)&&n!==(n=o[0].participants.join(", ")+"")&&j(f,n),(!p||d&1)&&h!==(h=H(o[0].date)+"")&&j(z,h),(!p||d&1)&&b!==(b=o[0].snippet+"")&&j(q,b),(!p||d&1&&D!==(D="#/messages/"+o[0].id))&&c(e,"href",D)},i(o){p||(C(a.$$.fragment,o),p=!0)},o(o){P(a.$$.fragment,o),p=!1},d(o){o&&_(e),S(a)}}}function U(i,e,t){let{conversationData:s}=e;return i.$$set=a=>{"conversationData"in a&&t(0,s=a.conversationData)},[s]}class N extends T{constructor(e){super();E(this,e,U,Q,M,{conversationData:0})}}function V(i){let e,t,s,a,r,u;return s=new N({props:{conversationData:{date:new Date("2021-02-10"),snippet:"The quick brown fox jumped over the lazy dog",participants:["Ethan Dawes"]}}}),r=new N({props:{conversationData:{date:new Date("2022-04-15"),snippet:"The quick brown fox jumped over the lazy dog",participants:["Ethan Dawes"]}}}),{c(){e=m("input"),t=$(),I(s.$$.fragment),a=$(),I(r.$$.fragment),c(e,"placeholder","Search")},m(n,f){g(n,e,f),g(n,t,f),k(s,n,f),g(n,a,f),k(r,n,f),u=!0},p:x,i(n){u||(C(s.$$.fragment,n),C(r.$$.fragment,n),u=!0)},o(n){P(s.$$.fragment,n),P(r.$$.fragment,n),u=!1},d(n){n&&_(e),n&&_(t),S(s,n),n&&_(a),S(r,n)}}}function W(i){async function e(){const s=(await gapi.client.gmail.users.threads.list({userId:"me",labelIds:"INBOX",maxResults:500,q:"from:me"})).result.threads.map(a=>gapi.client.gmail.users.threads.get({userId:"me",id:a.id}).then(r=>(console.log(r.result.messages[0]),r.result.messages.map(u=>X(u.payload.headers,"To")))));console.log(await Promise.all(s))}return R.subscribe(t=>{t&&e()}),[]}class te extends T{constructor(e){super();E(this,e,W,V,M,{})}}export{te as default};
